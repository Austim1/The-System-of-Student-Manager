/*
 * ?????????????????
 * ????1???????????????
 * ????2??????????��?
 * ????3??????????????????????????
 * ????4???????????????????????????????????????????
 * ????5??????????????��???????
 * ????6????????????��??????????????????��???????????????��??��??????????????????????
 * ????7????????????????????????????????????????
 * author??ywq
 */
package com.package_7;
import javax.swing.*;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.*;

public class Login6 extends JFrame implements ActionListener {

	//??????????????
	JButton jb1,jb2,jb3=null;
	JRadioButton jrb1,jrb2=null;
	JPanel jp1,jp2,jp3,jp4=null;
    JTextField jtf=null;
	JLabel jlb1,jlb2,jlb3=null;
	JPasswordField jpf=null;
	ButtonGroup bg=null;	
	
	//?????
	JMenuBar jmb=null;	
	JMenu jm=null;
	JMenuItem jmi1,jmi2=null;
	
	
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Login6  ms=new Login6();
		
						
	}
	//??????
	public Login6()
	{
		 //???????
		jb1=new JButton("???");
		jb2=new JButton("????");
		jb3=new JButton("???");
		//???��???
		jb1.addActionListener(this);
		jb2.addActionListener(this);
		jb3.addActionListener(this);
		
		jmb=new JMenuBar(); //JMenuBar??????
		jm=new JMenu("???"); //JMenu???????��??????
		jmi1=new JMenuItem("???"); //JMenuItem???????��????
		jmi2=new JMenuItem("?????");
		jm.add(jmi1);
		jm.add(jmi2);
		jmb.add(jm);
		
		
		jrb1=new JRadioButton("???",true);
		jrb2=new JRadioButton("???");
		bg=new ButtonGroup();
		bg.add(jrb1);
		bg.add(jrb2);
//		jrb2.setSelected(true);
		
		jp1=new JPanel();
		jp2=new JPanel();
		jp3=new JPanel();
		jp4=new JPanel();				
		
		jlb1=new JLabel("???????");
		jlb2=new JLabel("??    ??");
		jlb3=new JLabel("?    ???");
		
		jtf=new JTextField(10);
		jpf=new JPasswordField(10);
		//????JPanel??
		jp1.add(jlb1);
		jp1.add(jtf);
		
		jp2.add(jlb2);
		jp2.add(jpf);
		
		jp3.add(jlb3);
		jp3.add(jrb1);
		jp3.add(jrb2);
		
		jp4.add(jb1);
		jp4.add(jb2);
		jp4.add(jb3);
		
		//????JFrame??
		this.setJMenuBar(jmb);
		this.add(jp1);
		this.add(jp2);
		this.add(jp3);
		this.add(jp4);
		//???��????????
		this.setLayout(new GridLayout(4,1));
		//?????????????
		this.setTitle("????????????");
		//????????��
		this.setSize(300,250);
		//?????????��??
		this.setLocation(200, 150);
		//?????????????????JVM????
		this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		//???????
		this.setVisible(true);
		this.setResizable(true);
		
	}
	@Override
	public void actionPerformed(ActionEvent e) {

		if(e.getActionCommand()=="???")
		{
			System.exit(0);
		}else if(e.getActionCommand()=="???")
		{
			if(!jtf.getText().isEmpty() && !jpf.getText().isEmpty())
			{
				//???????????????????????????????
				GetSQL.ConnectSQL();
				//?????��?????
				if(jrb1.isSelected())
				{
					GetSQL.querytea("???",jtf.getText());
					//?????��??????????????????????????
					if(GetSQL.pwd ==null)
					{
                         this.clear();
					}else
					{
						//??????????
						this.tealogin();
					}
				}else if(jrb2.isSelected()) //?????????
				{
					GetSQL.querystu("???",jtf.getText());
					//?????��??????????????????????????
					if(GetSQL.pwd ==null)
					{
                         this.clear();
					}else
					{
						//??????????
						this.stulogin();
					}
				   
				}
			}else if(jtf.getText().isEmpty())
			{
				JOptionPane.showMessageDialog(null,"???????????","??????",JOptionPane.WARNING_MESSAGE);
			    this.clear();
			}else if(jpf.getText().isEmpty())	
			{
				JOptionPane.showMessageDialog(null,"??????????","??????",JOptionPane.WARNING_MESSAGE);
			    this.clear();
			}
		}else if(e.getActionCommand()=="????")
		{
			this.clear();
		}			
		
	}
				
		//??????????????
	public	void clear()
		{
			jtf.setText("");
			jpf.setText("");
		}
		    //???????��????
			public void stulogin()
			{
				if(GetSQL.pwd.equals(jpf.getText()))
				{
//					System.out.println("??????");
					JOptionPane.showMessageDialog(null,"????????","??????",JOptionPane.WARNING_MESSAGE);
					this.clear();
					//?????????
					 dispose();
					 //????????????
					 Stu_UI6 ui=new Stu_UI6();
				}else if(jtf.getText().isEmpty()&&jpf.getText().isEmpty())
				{
					JOptionPane.showMessageDialog(null,"?????????????????","??????",JOptionPane.WARNING_MESSAGE);
				}else if(jtf.getText().isEmpty())
				{
					JOptionPane.showMessageDialog(null,"?????????????","??????",JOptionPane.WARNING_MESSAGE);
				}else if(jpf.getText().isEmpty())
				{
					JOptionPane.showMessageDialog(null,"??????????","??????",JOptionPane.WARNING_MESSAGE);
				}else
				{
					JOptionPane.showMessageDialog(null,"????????????????\n??????????","??????",JOptionPane.ERROR_MESSAGE);
				    //????????
					this.clear();
				}
			}
			
			//???????��????
			public void tealogin()
			{
				if(GetSQL.pwd.equals(jpf.getText()))
				{
//					System.out.println("??????");
					 JOptionPane.showMessageDialog(null,"????????","??????",JOptionPane.WARNING_MESSAGE);
					 this.clear();	
					//?????????
					 dispose();
					 //???????????��?????????????????
					Teacher6 t=new Teacher6();				 					
				}else if(jtf.getText().isEmpty()&&jpf.getText().isEmpty())
				{
					JOptionPane.showMessageDialog(null,"?????????????????","??????",JOptionPane.WARNING_MESSAGE);
				}else if(jtf.getText().isEmpty())
				{
					JOptionPane.showMessageDialog(null,"?????????????","??????",JOptionPane.WARNING_MESSAGE);
				}else if(jpf.getText().isEmpty())
				{
					JOptionPane.showMessageDialog(null,"??????????","??????",JOptionPane.WARNING_MESSAGE);
				}else
				{
					JOptionPane.showMessageDialog(null,"????????????????\n??????????","??????",JOptionPane.ERROR_MESSAGE);
				    //????????
					this.clear();
				}
			}
		
}






	
